---
title: 类
time: 2023/03/04
category: C++
description: C++ Primer第七章
---

# 类

类的基本思想是数据抽象(data abstraction)和封装(encapsulation)。

- 数据抽象是一种依赖于接口(interface)和实现(implementation)分离的编程（以及设计）技术。

- + 类的接口包括用户所能执行的操作：类的实现则包括类的数据成员、负责接口实现的函数体以及定义类所需的各种私有函数。
- 封装实现了类的接口和实现的分离。封装后的类隐藏了它的实现细节，也就是说，类的用户只能使用接口而无法访问实现部分。

定义和声明成员函数的方式与普通函数差不多。成员函数的声明必须在类的内部，它的定义则既可以在类的内部也可以在类的外部。

作为接口组成部分的非成员函数，它们的定义和声明都在类的外部。

## 定义抽象数据类型

### 引入this

成员函数通过一个名为this的额外的隐式参数来访问调用它的那个对象。当我们调用一个成员函数时，用请求该函数的对象地址初始化this。

因此,在成员函数内部，我们可以直接使用调用该函数的对象的成员，而无须通过成员访问运算符来做到这一点，因为this所指的正是这个对象。任何对类成员的直接访问都被看作this的隐式引用.



```c++
return *this;//返回调用该函数的对象
```

其中，return语句解引用this指针以获得执行该函数的对象

### 引入const成员函数

紧随参数列表之后的const关键字，作用是修改隐式this指针的类型,将其变为指向常量的指针。

像这样使用const的成员函数被称作常量成员函数(const member function)

### 类作用域和成员函数

类本身就是一个作用域。类的成员函数的定义嵌套在类的作用域之内。

值得注意的是，**成员函数体**可以**随意使用类中的其他成员**而无须在意这些成员出现的次序.编译器分两步处理类：首先编译成员的声明，然后才轮到成员函数体（如果有的话）.

### 在类的外部定义成员函数

在类的外部定义成员函数时，成员函数的定义必须与它的声明匹配。也就是说，返回类型、参数列表和函数名都得与类内部的声明保持一致。如果成员被声明成常量成员函数，那么它的定义也必须在参数列表后明确指定cost属性。

类外部定义的成员的名字必须包含它所属的类名.

### 构造函数

每个类都分别定义了它的对象被初始化的方式，类通过一个或几个特殊的成员函数来控制其对象的初始化过程，这些函数叫做构造函数(constructor)。构造函数的任务是初始化类对象的数据成员，无论何时只要类的对象被创建，就会执行构造函数。

