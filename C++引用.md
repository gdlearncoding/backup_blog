---
title: 引用
category: C++
time: 2023/04/11
description: 用法,说明
---

## 引用

**引用**（`reference`）是C++对C的一个重要扩充。变量的引用就是变量的别名，因此引用又称**别名**。

引用与其所代表的变量共享同一内存单元`(不占用内存空间)`，系统并不为引用另外分配存储空间。实际上，编译系统使引用和其代表的变量具有相同的地址。

```c++
//类型 &引用名 = 已定义的变量名
#include <iostream>
using namespace std;
int main() 
{
	int i = 10;
	int &j = i;
	cout << "i = " << i << " j = " << j << endl;
	cout << "i的地址为 " << &i << endl;
	cout << "j的地址为 " << &j << endl;
	return 0;
}
//上面代码输出i和j的值相同，地址也相同。
```


引用并不是一种独立的数据类型，它必须与某一种类型的变量相联系。在声明引用时，必须立即对它进行初始化，不能声明完成后再赋值。

为引用提供的初始值，可以是一个变量或者另一个引用。

指针是通过地址间接访问某个变量，而引用则是通过别名直接访问某个变量。

### 指针与引用

1. 从语法规则上讲，指针变量存储某个实例(变量或对象）的地址;
   引用是某个实例的别名。
2. 程序为指针变量分配内存区域;而不为引用分配内存区域。

```c++
int main()
{
	int a = 10;
	int* ip = &a;
	int& b = a;  \\b是a的别名 并没有分配新的空间
}

```

3. 解引用是指针使用时要在前加“*”;引用可以直接使用。

4. 指针变量的值可以发生改变，存储不同实例的地址;
   引用在定义时就被初始化，之后无法改变(不能是其他实例的引用)。

5. 指针变量的值可以为空(NULL,nullptr);没有空引用。

6. 指针变量作为形参时需要测试它的合法性(判空NULL)；
   引用不需要判空。

7. 对指针变量使用"sizeof"得到的是指针变量的大小；
   对引用变量使用"sizeof"得到的是变量的大小。

8. 理论上指针的级数没有限制;但引用只有一级。
   即不存在引用的引用，但可以有指针的指针。

9. 不可以对函数中的局部变量或对象以引用或指针方式返回。

   当变量的生存期不受函数的影响时就可以返回地址

![image-20230411204027521](C:/Users/Echo/AppData/Roaming/Typora/typora-user-images/image-20230411204027521.png)