---
title: const修饰符
category: C++
time: 2023/04/11
description: const与指针一起
---

## const

C++定义常量: 在C语言中，习惯使用`#define`来定义常量，例如`#define PI 3.14`，C++提供了一种更灵活、更安全的方式来定义常量，即使用`const`修饰符来定义常量。例如`const float PI = 3.14；`



const可以与指针一起使用，它们的组合情况复杂，可归纳为3种：指向常量的指针、常指针和指向常量的常指针。

==把类型*看为一块,const+类型就是不能改变类型(如果该类型是个指针,那就是不能改变指针的值),类型+const吗就是后面的值不能改变==

指向常量的指针：一个指向常量的指针变量。

```c++
const char* pc = "abcd";
//该方法不允许改变指针所指的变量，即
    pc[3] = 'x'   //是错误的，
//但是，由于pc是一个指向常量的普通指针变量，不是常指针，因此可以改变pc所指的地址，例如
    pc = "ervfs";
//该语句付给了指针另一个字符串的地址，改变了pc的值。

```

常指针：将指针变量所指的地址声明为常量

```c++
char* const pc = "abcd";
//创建一个常指针，一个不能移动的固定指针，可更改内容，如
    pc[3] = 'x';
//但不能改变地址，如
    pc = 'dsff';  //不合法

```

指向常量的常指针：这个指针所指的地址不能改变，它所指向的地址中的内容也不能改变。

```c++
const char* const pc = "abcd";
//内容和地址均不能改变
```

说明：

- 如果用const定义整型常量，关键字可以省略。即 const in bufsize = 100 与 const bufsize = 100等价；


- 常量一旦被建立，在程序的任何地方都不能再更改。


- 与#define不同，const定义的常量可以有自己的数据类型。


- 函数参数也可以用const说明，用于保证实参在该函数内不被改动。